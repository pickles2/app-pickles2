<?php ob_start(); ?><link rel="stylesheet" href="./index_files/style.css" /><?php $px->bowl()->send( ob_get_clean(), 'head' );?>
<?php ob_start(); ?><script src="./index_files/script.js"></script><?php $px->bowl()->send( ob_get_clean(), 'foot' );?>
パブリッシュは、制作したウェブコンテンツを静的なHTMLファイルに書き出す処理です。

<!-- autoindex -->




## パブリッシュの手順

1. パブリッシュタブをクリックして、パブリッシュ画面へ進みます。
2. 「パブリッシュする」ボタンをクリックします。
3. パブリッシュの条件を設定します。
    - パブリッシュ対象範囲: 今回のパブリッシュで対象にしたい範囲を、ディレクトリで指定できます。`/` を指定するとすべてのファイルをパブリッシュします。ページ数に応じてパブリッシュに時間がかかるので、必要な範囲を絞れば早く完了します。
    - パブリッシュ対象外範囲: パブリッシュ対象範囲に含まれるが、パブリッシュをスキップしたいパスを指定します。
4. 「パブリッシュを実行」ボタンをクリックして、パブリッシュを開始します。
5. パブリッシュにはある程度時間がかかります。完了するまでそのまま待ちます。


### コマンドラインから実行する

コマンドラインツールが使える場合は、次のコマンドからもパブリッシュを実行することができます。


```
$ cd {$path_controot}
$ php .px_execute.php /?PX=publish.run
```

#### オプション

<table class="def">
<tr>
<th>path_region</th>
<td>対象範囲を指定する。</td>
</tr>
<tr>
<th>paths_ignore</th>
<td>path_region で指定した対象範囲のうち、パブリッシュを除外するパスを指定する。複数指定可。</td>
</tr>
</table>

オプションを設定した実行例を示します。

```
$ php .px_execute.php /?PX=publish.run&path_region=/a/b/&paths_ignore[]=/a/b/ignore1/&paths_ignore[]=/a/b/ignore2/
```

この例では、対象範囲を `/a/b/` に絞った上で、 `/a/b/ignore1/` と `/a/b/ignore2/` を対象外に指定しています。


## 生成されたファイルはどこに出力されるのか？

### 一時パブリッシュディレクトリ

パブリッシュしたファイルは、次の一時パブリッシュディレクトリに出力されます。

```
./px-files/_sys/ram/publish/*
```

次のファイルが出力されます。

- publish_log.csv : 今回のパブリッシュで出力されたファイルの一覧です。
- alert_log.csv : パブリッシュでエラーが検出された場合に生成されます。
- htdocs/ : 今回のパブリッシュで出力されたHTMLやリソースファイル一式が格納されます。

### パブリッシュ先ディレクトリ

ここには、過去にパブリッシュされたファイルに、今回パブリッシュされたファイルを加えたサイト全体のパブリッシュファイルが置かれます。

このディレクトリは、`$conf->path_publish_dir` に設定した場所にあります。`$conf->path_publish_dir` を設定していない場合、一時パブリッシュディレクトリにのみ出力されます。
