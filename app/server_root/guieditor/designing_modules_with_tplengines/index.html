<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8" />
		<title>Twigエンジンを用いたGUIモジュール定義 | Pickles 2 Desktop Tool - HELP</title>

		<meta name="viewport" content="width=device-width" />
		<meta name="keywords" content="" />
		<meta name="description" content="" />

 
<!-- jQuery -->
<script src="../../common/scripts/jquery-1.10.1.min.js" type="text/javascript"></script>

<!-- Bootstrap -->
<link rel="stylesheet" href="../../common/styles/bootstrap/css/bootstrap.min.css">
<script src="../../common/styles/bootstrap/js/bootstrap.min.js"></script>

<!-- FESS -->
<link rel="stylesheet" href="../../common/styles/contents.css" type="text/css" />

		<!-- Bootstrap Theme -->
		<link rel="stylesheet" href="../../caches/p/theme/styles/bootstrap-theme.min.css">
		<link rel="stylesheet" href="../../caches/p/theme/styles/theme.css">
<style>

</style>
	</head>
	<body>
		<header class="theme_header" id="page_top">
			<div class="container">
				<p class="theme_si"><a href="../../index.html">Pickles 2 Desktop Tool - HELP</a></p>
				<div class="theme_shouldernavi">
<ul></ul>				</div>
				<div class="theme_globalnavi">
<ul><li><a href="../../intro/index.html">概要</a></li><li><a href="../../sitemap/index.html">サイトマップ編集</a></li><li><a href="../../theme/index.html">テーマ編集</a></li><li><a href="../../contents/index.html" class="current">コンテンツ編集</a></li><li><a href="../../publish/index.html">パブリッシュ</a></li><li><a href="../../other/index.html">その他の機能</a></li></ul>
				</div>
			</div>
		</header>
		<div class="theme_mainblock">
			<div class="container">
				<div class="row">
					<div class="col-sm-9">
						<div class="theme_breadcrumb"><ul><li><a href="../../index.html">ヘルプトップ</a></li><li><a href="../../contents/index.html">コンテンツ編集</a></li><li><a href="../index.html">GUI編集</a></li><li><span>Twigエンジンを用いたGUIモジュール定義</span></li></ul></div>
						<h1>Twigエンジンを用いたGUIモジュール定義</h1>
						<div class="contents">
<p>Twig テンプレートエンジンを用いたモジュールを定義することができます。</p>

<!-- == autoindex == -->
<div style="margin:2em 5%; border:1px solid #bbb; padding:1em; background:rgba(124, 124, 124, 0.05); border-radius:5px;">
<div style="margin:0; padding:0; text-align:center; font-weight:bold;">INDEX</div><ul style="margin:0; padding:0 0 0 2em;"><li style="list-style-type:disc; display:list-item;"><a href="#hash_条件">条件</a></li>
<li style="list-style-type:disc; display:list-item;"><a href="#hash_UI要素の定義_(interface)">UI要素の定義 (interface)</a></li>
<li style="list-style-type:disc; display:list-item;"><a href="#hash_テンプレートの書式">テンプレートの書式</a></li></ul>
</div>
<!-- / == autoindex == -->


<span id="hash_条件"></span><h2>条件</h2>

<p>次の条件が満たされる場合に、Twigテンプレートモジュールであると解釈されます。</p>

<ul>
<li><code>info.json</code> に <code>interface</code> が定義されていること。</li>
<li><code>template.html.twig</code> が設置されていること。</li>
</ul>

<span id="hash_UI要素の定義_(interface)"></span><h2>UI要素の定義 (interface)</h2>

<p><code>info.json</code> に、<code>interface</code> をキーに、次のように定義します。</p>

<pre><code>{
    "name": "Sample Module",
    "areaSizeDetection": "shallow",
    "interface": {
        "fields": {
            "text1-1":{
                "fieldType": "input",
                "type":"multitext",
                "rows":4
            },
            "text1-2":{
                "fieldType": "input",
                "type":"multitext",
                "rows":4
            },
            "loop":{
                "fieldType":"loop"
            }
        },
        "subModule":{
            "loop":{
                "fields":{
                    "text2-1":{
                        "fieldType": "input",
                        "type":"multitext",
                        "rows":4
                    } ,
                    "text2-2":{
                        "fieldType": "input",
                        "type":"multitext",
                        "rows":4
                    }
                }
            }
        }
    }
}
</code></pre>

<p><code>interface</code> には、<code>fields</code> と、<code>subModule</code> の2つのオブジェクトを格納します。</p>

<p><code>interface.fields[$fieldName]</code> に、フィールドを定義します。
フィールドの種類を <code>interface.fields[$fieldName].fieldType</code> に定義します。</p>

<p>フィールドの種類は、<code>input</code>、<code>module</code>、<code>loop</code> のいずれかです。それ以外の値は通常のフィールドと同じです。</p>

<p><code>fieldType</code> が <code>loop</code> の場合、<code>interface.subModule</code> に、サブモジュールを登録します。
loopフィールドの <code>name</code> と、 <code>interface.subModule[$subModuleName]</code> とで関連付けられます。<code>interface.subModule[$subModuleName][$loopFieldName]</code> 以下は、<code>interface.fields</code> の書き方と同じです。</p>

<span id="hash_テンプレートの書式"></span><h2>テンプレートの書式</h2>

<p>Twigテンプレートエンジンの書式に従います。詳しくは <a href="http://twig.sensiolabs.org/" target="_blank">Twigの公式ドキュメント</a> を参照してください。</p>

<p>次のサンプルは、<code>main</code> と名付けられた入力フィールドのコードを出力する例です。</p>

<pre><code>&lt;div&gt;
{{ main }}
&lt;/div&gt;
</code></pre>

<p>特殊な値として、環境変数 <code>_ENV</code> が渡されます。</p>

<pre><code>{% if _ENV.mode == 'canvas' %}
&lt;div&gt;ここは、編集画面でのみ出力されるコードです。&lt;/div&gt;
{% endif %}

{% if _ENV.mode == 'finalize' %}
&lt;div&gt;ここは、編集画面では出力されないコードです。&lt;/div&gt;
{% endif %}
</code></pre>
						</div>
						<div class="theme_breadcrumb"><ul><li><a href="../../index.html">ヘルプトップ</a></li><li><a href="../../contents/index.html">コンテンツ編集</a></li><li><a href="../index.html">GUI編集</a></li><li><span>Twigエンジンを用いたGUIモジュール定義</span></li></ul></div>
					</div>
					<div class="col-sm-3">
						<nav class="theme_common_navi">
							<p><a href="../../contents/index.html">コンテンツ編集</a></p>
<ul>
<li><a href="../index.html" class="current">GUI編集</a><ul>
<li><a href="../designing_modules/index.html">GUIモジュール定義</a></li>
<li><a href="./index.html" class="current">Twigエンジンを用いたGUIモジュール定義</a></li>
<li><a href="../fields/index.html">フィールド一覧</a></li>
</ul>
</li>
</ul>
						</nav>

<a class="twitter-timeline" href="https://twitter.com/pxfw" data-widget-id="567316803953504256">@pxfwさんのツイート</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

					</div>
				</div><!-- /.row -->
			</div><!-- /.container -->
		</div><!-- /.theme_mainblock -->
		<footer class="theme_footer">
			<div class="container">
				<nav class="theme_megafooter_navi">
<ul>
<li><a href="../../intro/index.html">概要</a></li>
<li><a href="../../sitemap/index.html">サイトマップ編集</a></li>
<li><a href="../../theme/index.html">テーマ編集</a></li>
<li><a href="../../contents/index.html" class="current">コンテンツ編集</a><ul>
<li><a href="../index.html" class="current">GUI編集</a></li>
</ul>
</li>
<li><a href="../../publish/index.html">パブリッシュ</a></li>
<li><a href="../../other/index.html">その他の機能</a><ul>
<li><a href="../../other/clearcache/index.html">キャッシュを削除する</a></li>
</ul>
</li>
</ul>
				</nav>
			</div>
			<div class="container theme_footer_shouldernavi">
<ul><li><a href="../../index.html">ヘルプトップ</a></li></ul>			</div>
			<div class="container">
				<p style="text-align:center;">Pickles 2 (C)Tomoya Koyanagi.</p>
			</div>
		</footer>
	</body>
</html>
