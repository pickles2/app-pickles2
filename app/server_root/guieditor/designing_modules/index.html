<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8" />
		<title>GUIモジュール定義 | Pickles 2 Desktop Tool - HELP</title>

		<meta name="viewport" content="width=device-width" />
		<meta name="keywords" content="" />
		<meta name="description" content="" />

 
<!-- jQuery -->
<script src="../../common/scripts/jquery-1.10.1.min.js" type="text/javascript"></script>

<!-- Bootstrap -->
<link rel="stylesheet" href="../../common/styles/bootstrap/css/bootstrap.min.css">
<script src="../../common/styles/bootstrap/js/bootstrap.min.js"></script>

<!-- FESS -->
<link rel="stylesheet" href="../../common/styles/contents.css" type="text/css" />

		<!-- Bootstrap Theme -->
		<link rel="stylesheet" href="../../caches/p/theme/styles/bootstrap-theme.min.css">
		<link rel="stylesheet" href="../../caches/p/theme/styles/theme.css">
<style>

</style>
	</head>
	<body>
		<header class="theme_header" id="page_top">
			<div class="container">
				<p class="theme_si"><a href="../../index.html">Pickles 2 Desktop Tool - HELP</a></p>
				<div class="theme_shouldernavi">
<ul></ul>				</div>
				<div class="theme_globalnavi">
<ul><li><a href="../../intro/index.html">概要</a></li><li><a href="../../sitemap/index.html">サイトマップ編集</a></li><li><a href="../../theme/index.html">テーマ編集</a></li><li><a href="../../contents/index.html" class="current">コンテンツ編集</a></li><li><a href="../../publish/index.html">パブリッシュ</a></li><li><a href="../../other/index.html">その他の機能</a></li></ul>
				</div>
			</div>
		</header>
		<div class="theme_mainblock">
			<div class="container">
				<div class="row">
					<div class="col-sm-9">
						<div class="theme_breadcrumb"><ul><li><a href="../../index.html">ヘルプトップ</a></li><li><a href="../../contents/index.html">コンテンツ編集</a></li><li><a href="../index.html">GUI編集</a></li><li><span>GUIモジュール定義</span></li></ul></div>
						<h1>GUIモジュール定義</h1>
						<div class="contents">
<p>Pickles2 Desktop Tool のGUI編集機能は、個別に設計された小さな部品 <strong>ドキュメントモジュール</strong> を組み合わせて構築するインターフェイスです。</p>

<p>ここでは、ドキュメントモジュールのテンプレートを定義する方法について説明します。</p>

<!-- == autoindex == -->
<div style="margin:2em 5%; border:1px solid #bbb; padding:1em; background:rgba(124, 124, 124, 0.05); border-radius:5px;">
<div style="margin:0; padding:0; text-align:center; font-weight:bold;">INDEX</div><ul style="margin:0; padding:0 0 0 2em;"><li style="list-style-type:disc; display:list-item;"><a href="#hash_ディレクトリとファイルの構成">ディレクトリとファイルの構成</a><ul style="margin:0; padding:0 0 0 2em;"><li style="list-style-type:disc; display:list-item;"><a href="#hash_モジュールの単位とディレクトリ構成">モジュールの単位とディレクトリ構成</a></li>
<li style="list-style-type:disc; display:list-item;"><a href="#hash_パッケージ1つあたりのファイル構成">パッケージ1つあたりのファイル構成</a><ul style="margin:0; padding:0 0 0 2em;"><li style="list-style-type:disc; display:list-item;"><a href="#hash_info.json">info.json</a></li></ul></li><li style="list-style-type:disc; display:list-item;"><a href="#hash_カテゴリ1つあたりのファイル構成">カテゴリ1つあたりのファイル構成</a><ul style="margin:0; padding:0 0 0 2em;"><li style="list-style-type:disc; display:list-item;"><a href="#hash_2_info.json">info.json</a></li></ul></li><li style="list-style-type:disc; display:list-item;"><a href="#hash_モジュール1つあたりのファイル構成">モジュール1つあたりのファイル構成</a><ul style="margin:0; padding:0 0 0 2em;"><li style="list-style-type:disc; display:list-item;"><a href="#hash_template.html">template.html</a></li>
<li style="list-style-type:disc; display:list-item;"><a href="#hash_module.css_(または_module.css.scss)">module.css (または module.css.scss)</a></li>
<li style="list-style-type:disc; display:list-item;"><a href="#hash_module.js">module.js</a></li>
<li style="list-style-type:disc; display:list-item;"><a href="#hash_thumb.png">thumb.png</a></li>
<li style="list-style-type:disc; display:list-item;"><a href="#hash_3_info.json">info.json</a></li>
<li style="list-style-type:disc; display:list-item;"><a href="#hash_README.html_(または_README.md)">README.html (または README.md)</a></li>
<li style="list-style-type:disc; display:list-item;"><a href="#hash_pics/*.png">pics/*.png</a></li></ul></li></ul></li><li style="list-style-type:disc; display:list-item;"><a href="#hash_モジュールをプロジェクトに登録する">モジュールをプロジェクトに登録する</a><ul style="margin:0; padding:0 0 0 2em;"><li style="list-style-type:disc; display:list-item;"><a href="#hash_Config_画面を開く">Config 画面を開く</a></li>
<li style="list-style-type:disc; display:list-item;"><a href="#hash_Config_にディレクトリを登録">Config にディレクトリを登録</a></li></ul>
</li></ul>
</div>
<!-- / == autoindex == -->


<span id="hash_ディレクトリとファイルの構成"></span><h2>ディレクトリとファイルの構成</h2>

<span id="hash_モジュールの単位とディレクトリ構成"></span><h3>モジュールの単位とディレクトリ構成</h3>

<p>モジュールは、次のようなディレクトリ構成で表現されます。</p>

<pre><code>└─ package(root)
  ├─ info.json
  ├─ category1
  │　├─ info.json
  │　├─ module1
  │　│　├─ README.md
  │　│　├─ info.json
  │　│　├─ template.html
  │　│　├─ module.css
  │　│　├─ module.js
  │　│　└─ thumb.png
  │　│
  │　├─ module2
  │　├─ module3
  │　├─ ・・・
  │　└─ module N
  │
  ├─ category2
  ├─ category3
  ├─ ・・・
  └─ category N
</code></pre>

<p>この構成を元に、モジュールの識別IDが生成されます。モジュールIDは次のような形式になります。</p>

<ul>
<li>{$mod_package}:{$mod_category}/{$mod_name}/</li>
</ul>

<span id="hash_パッケージ1つあたりのファイル構成"></span><h3>パッケージ1つあたりのファイル構成</h3>

<p><code>{$mod_package}</code> ディレクトリには、各カテゴリディレクトリの他に、次のようなファイルで構成されます。</p>

<ul>
<li>info.json</li>
</ul>

<span id="hash_info.json"></span><h4>info.json</h4>

<p>このJSONファイルには、パッケージの詳細な付加情報を記述します。</p>

<p>下記は記述例です。</p>

<pre><code>{
  "name": "パッケージの論理名称",
  "sort":[
    "category1",
    "category2"
  ]
}
</code></pre>

<p><code>sort</code> には、パッケージに含まれるカテゴリのディレクトリ名を配列で指定します。ここに書かれたカテゴリは優先的に上位に表示され、指定した順番に並べられます。記述のないカテゴリは、成り行き順に最後尾に続いて表示されます。</p>

<span id="hash_カテゴリ1つあたりのファイル構成"></span><h3>カテゴリ1つあたりのファイル構成</h3>

<p><code>{$mod_category}</code> ディレクトリには、各モジュールディレクトリの他に、次のようなファイルで構成されます。</p>

<ul>
<li>info.json</li>
</ul>

<span id="hash_2_info.json"></span><h4>info.json</h4>

<p>このJSONファイルには、カテゴリの詳細な付加情報を記述します。</p>

<p>下記は記述例です。</p>

<pre><code>{
  "name": "カテゴリの論理名称",
  "sort":[
    "module1",
    "module2"
  ]
}
</code></pre>

<p><code>sort</code> には、カテゴリに含まれるモジュールのディレクトリ名を配列で指定します。ここに書かれたモジュールは優先的に上位に表示され、指定した順番に並べられます。記述のないモジュールは、成り行き順に最後尾に続いて表示されます。</p>

<span id="hash_モジュール1つあたりのファイル構成"></span><h3>モジュール1つあたりのファイル構成</h3>

<p><code>{$mod_name}</code> ディレクトリの内容は、次のようなファイルで構成されます。</p>

<ul>
<li>template.html</li>
<li>module.css (または module.css.scss)</li>
<li>module.js</li>
<li>thumb.png</li>
<li>info.json</li>
<li>README.html (または README.md)</li>
<li>pics/&#42;.png</li>
</ul>

<span id="hash_template.html"></span><h4>template.html</h4>

<p>このHTMLファイルに、テンプレートの実装を記述します。
テンプレートは、部分だけを切り出した純粋なHTMLをベースに、フィールド(変更可能な箇所を定義するメタ構文)を埋め込むような形式で記述していきます。</p>

<pre><code>&lt;!-- template.html の実装例 --&gt;
&lt;div class="sample_module"&gt;
    &lt;div class="sample_module-inner"&gt;
{&amp;{"module":{"name":"main"}}&amp;}
    &lt;/div&gt;
&lt;/div&gt;
</code></pre>

<p>利用可能なフィールドについては、<a href="../fields/index.html">フィールド一覧</a>のページを参照してください。</p>

<p><code>template.html</code> の代わりに、<code>template.html.twig</code> を設置すると、Twigテンプレートエンジンを利用できます。詳しくは、<a href="../designing_modules_with_tplengines/index.html">Twigエンジンを用いたGUIモジュール定義</a> を参照ください。</p>

<span id="hash_module.css_(または_module.css.scss)"></span><h4>module.css (または module.css.scss)</h4>

<p>モジュールに関連するスタイルシートを記述します。
ファイル名の最後に <code>.scss</code> を付加すると、SCSS形式で記述することができます。</p>

<pre><code>// module.css.scss の実装例
.sample_module{
    border: 1px solid #999;
    padding: 15px;
    margin:1em 0;
    &amp;-inner{
        padding: 0;
        margin: 0;
    }
}
</code></pre>

<p>ここに書かれたスタイルは、Pickles2用のプラグイン px2-px2dthelper によって収集・統合し、テーマから自動的に読み込むことができます。</p>

<span id="hash_module.js"></span><h4>module.js</h4>

<p>モジュールの動作に関連するスクリプトを記述します。</p>

<p>ここに書かれたスクリプトは、Pickles2用のプラグイン px2-px2dthelper によって収集・統合し、テーマから自動的に読み込むことができます。</p>

<span id="hash_thumb.png"></span><h4>thumb.png</h4>

<p>thumb.png は、GUI編集画面上での、モジュールのサムネイルとして使用されます。</p>

<p>縦横比 1:1 の画像を登録してください。大きさについては特に規定はありませんが、500px前後で作成されていれば十分でしょう。</p>

<p><code>thumb.png</code> の他にも、<code>thumb.jpg</code>、<code>thumb.gif</code>、<code>thumb.svg</code> が利用できます。</p>

<span id="hash_3_info.json"></span><h4>info.json</h4>

<p>このJSONファイルには、モジュールの詳細な付加情報を記述します。</p>

<p>下記は記述例です。</p>

<pre><code>{
  "name": ".cols (3カラム)",
  "areaSizeDetection ": "shallow"
}
</code></pre>

<dl>
<dt>name</dt><dd>モジュールの名称を設定します。</dd>
<dt>areaSizeDetection</dt><dd>編集画面でモジュールのサイズを測る方法を指定します。<code>deep</code> は、モジュールに含まれるすべての要素のサイズを測り、最大値を探します。<code>shallow</code>を指定すると、ルートノードのみのサイズを測ります。デフォルトは<code>shallow</code>です。</dd>
<dt>interface</dt><dd>Twigテンプレートエンジンを利用する場合に、入力欄の構造を定義します。詳しくは、<a href="../designing_modules_with_tplengines/index.html">Twigエンジンを用いたGUIモジュール定義</a> を参照してください。</dd>
</dl>

<span id="hash_README.html_(または_README.md)"></span><h4>README.html (または README.md)</h4>

<p>モジュールに関する説明などがあれば、このファイルに記述します。</p>

<p>この記述は、自動生成されるスタイルガイドなどに記載されます。</p>

<span id="hash_pics/*.png"></span><h4>pics/*.png</h4>

<p>picsディレクトリに置かれた画像は、README.html(.md) と共にスタイルガイドなどに表示されます。
モジュール名だけでは内容を把握しにくかったり、微妙に異なる他のモジュールと区別しなければならない場合などに、ユーザーの判断を助けるヒントとして活用できます。</p>

<span id="hash_モジュールをプロジェクトに登録する"></span><h2>モジュールをプロジェクトに登録する</h2>

<p>モジュールの定義ができたら、コンフィグ画面からモジュールとして登録します。</p>

<span id="hash_Config_画面を開く"></span><h3>Config 画面を開く</h3>

<p>サブメニュー内にある <code>Config</code> を開きます。</p>

<span id="hash_Config_にディレクトリを登録"></span><h3>Config にディレクトリを登録</h3>

<p>Pickles2 Desktop Tool の設定は、Pickles2 の Config <code>$conf-&gt;plugins-&gt;px2dt</code> に記述します。 次の例を参考に、<code>paths_module_template</code> 欄にモジュールのパスを設定してください。</p>

<pre><code>@$conf-&gt;plugins-&gt;px2dt-&gt;paths_module_template = [
  "SELF" =&gt; "./px-files/resources/module_templates/"
];
</code></pre>

<p>モジュールのセットは、1つのプロジェクトにつき複数登録することができます。</p>

<p><code>paths_module_template</code> の添字(上記の例では、"SELF")は、モジュールのIDの一部として利用されます。コンテンツに使用した後から変更すると、モジュール構造が壊れ、作成済みのコンテンツが失われる場合がありますので注意してください。添字には、半角英数字と、ハイフン、アンダースコア が使えます。</p>

<p>Pickles2 の Config は、<code>./px-files/config.php</code> に保存されます。</p>
						</div>
						<div class="theme_breadcrumb"><ul><li><a href="../../index.html">ヘルプトップ</a></li><li><a href="../../contents/index.html">コンテンツ編集</a></li><li><a href="../index.html">GUI編集</a></li><li><span>GUIモジュール定義</span></li></ul></div>
					</div>
					<div class="col-sm-3">
						<nav class="theme_common_navi">
							<p><a href="../../contents/index.html">コンテンツ編集</a></p>
<ul>
<li><a href="../index.html" class="current">GUI編集</a><ul>
<li><a href="./index.html" class="current">GUIモジュール定義</a></li>
<li><a href="../designing_modules_with_tplengines/index.html">Twigエンジンを用いたGUIモジュール定義</a></li>
<li><a href="../fields/index.html">フィールド一覧</a></li>
<li><a href="../select_gui_engine/index.html">GUI編集エンジンの種類と切り替え方法</a></li>
</ul>
</li>
</ul>
						</nav>

<a class="twitter-timeline" href="https://twitter.com/pxfw" data-widget-id="567316803953504256">@pxfwさんのツイート</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

					</div>
				</div><!-- /.row -->
			</div><!-- /.container -->
		</div><!-- /.theme_mainblock -->
		<footer class="theme_footer">
			<div class="container">
				<nav class="theme_megafooter_navi">
<ul>
<li><a href="../../intro/index.html">概要</a></li>
<li><a href="../../sitemap/index.html">サイトマップ編集</a></li>
<li><a href="../../theme/index.html">テーマ編集</a></li>
<li><a href="../../contents/index.html" class="current">コンテンツ編集</a><ul>
<li><a href="../index.html" class="current">GUI編集</a></li>
</ul>
</li>
<li><a href="../../publish/index.html">パブリッシュ</a></li>
<li><a href="../../other/index.html">その他の機能</a><ul>
<li><a href="../../other/clearcache/index.html">キャッシュを削除する</a></li>
</ul>
</li>
</ul>
				</nav>
			</div>
			<div class="container theme_footer_shouldernavi">
<ul><li><a href="../../index.html">ヘルプトップ</a></li></ul>			</div>
			<div class="container">
				<p style="text-align:center;">Pickles 2 (C)Tomoya Koyanagi.</p>
			</div>
		</footer>
	</body>
</html>
