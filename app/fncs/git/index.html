<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8" />
		<title>git - Pickles 2 Desktop Tool</title>

		<meta name="viewport" content="width=device-width" />
		<meta name="keywords" content="" />
		<meta name="description" content="" />

		<!-- jQuery -->
		<script src="../../common/scripts/jquery-1.11.1.min.js" type="text/javascript"></script>

		<!-- jQuery UI -->
		<link rel="stylesheet" href="../../common/jquery-ui/jquery-ui.min.css">
		<script src="../../common/jquery-ui/jquery-ui.min.js"></script>

		<!-- Bootstrap -->
		<link rel="stylesheet" href="../../common/bootstrap/css/bootstrap.min.css">
		<script src="../../common/bootstrap/js/bootstrap.min.js"></script>

		<!-- normalize & FESS -->
		<link rel="stylesheet" href="../../common/styles/contents.css" type="text/css" />

		<!-- Local Resources -->
		<link rel="stylesheet" href="./index_files/style.css" type="text/css" />

		<script>
			window.px = $.px = window.parent.px;

			function cont_git_init(btn){
				$(btn).attr('disabled', 'disabled');
				var pj = px.getCurrentProject();
				$('.cont_console').text('');
				window.px.utils.spawn('git',
					['init'],
					{
						cd: pj.get('path'),
						success: function(data){
							$('.cont_console').text(
								$('.cont_console').text() + data
							);
						} ,
						error: function(data){
							$('.cont_console').text(
								$('.cont_console').text() + data
							);
						} ,
						complete: function(code){
							// $('.cont_console').text(
							// 	$('.cont_console').text() + code
							// );
							$(btn).removeAttr('disabled');
							px.message( 'gitを初期化しました。' );
						}
					}
				);
			}

			function cont_git_status(btn){
				$(btn).attr('disabled', 'disabled');
				var pj = px.getCurrentProject();
				$('.cont_console').text('');
				px.execDialog(
					'git status',
					{
						cd: pj.get('path'),
						title: '$ git status',
						description: $('<p>').text('gitのステータス状態を表示します。'),
						complete: function(stdout){
							$('.cont_console').text( stdout );
							$(btn).removeAttr('disabled');
							px.message( 'gitのステータス表示を完了しました。' );
						}
					}
				);
				// window.px.utils.spawn('git',
				// 	['status'],
				// 	{
				// 		cd: pj.get('path'),
				// 		success: function(data){
				// 			$('.cont_console').text(
				// 				$('.cont_console').text() + data
				// 			);
				// 		} ,
				// 		error: function(data){
				// 			$('.cont_console').text(
				// 				$('.cont_console').text() + data
				// 			);
				// 		} ,
				// 		complete: function(code){
				// 			// $('.cont_console').text(
				// 			// 	$('.cont_console').text() + code
				// 			// );
				// 			$(btn).removeAttr('disabled');
				// 			px.message( 'gitのステータス表示を完了しました。' );
				// 		}
				// 	}
				// );
			}

		</script>
	</head>
	<body>
		<div class="container">
			<h1>git</h1>
		</div>
		<div class="contents">
			<div class="container">
				<p><button onclick="cont_git_init(this); return false;">$ git init</button></p>
				<p><button onclick="cont_git_status(this); return false;">$ git status</button></p>
				<pre class="cont_console" style="max-height:360px;">console:
</pre>
			</div>
		</div>
	</body>
</html>