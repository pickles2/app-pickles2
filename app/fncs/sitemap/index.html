<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8" />
		<title>Filelist - Pickles 2 Desktop Tool</title>

		<meta name="viewport" content="width=device-width" />
		<meta name="keywords" content="" />
		<meta name="description" content="" />

		<!-- jQuery -->
		<script src="../../common/scripts/jquery-1.11.1.min.js" type="text/javascript"></script>

		<!-- jQuery UI -->
		<link rel="stylesheet" href="../../common/jquery-ui/jquery-ui.min.css">
		<script src="../../common/jquery-ui/jquery-ui.min.js"></script>

		<!-- jQuery mobile -->
		<link rel="stylesheet" href="../../common/jquery.mobile/jquery.mobile-1.4.5.min.css" />
		<script src="../../common/jquery.mobile/jquery.mobile-1.4.5.min.js"></script>

		<!-- Bootstrap -->
		<link rel="stylesheet" href="../../common/bootstrap/css/bootstrap.min.css">
		<script src="../../common/bootstrap/js/bootstrap.min.js"></script>

		<!-- normalize & FESS -->
		<link rel="stylesheet" href="../../common/styles/contents.css" type="text/css" />

		<!-- Local Resources -->
		<link rel="stylesheet" href="./index_files/style.css" type="text/css" />

		<script>
			window.px = $.px = window.parent.px;
			$(function(){
				var pj = px.getCurrentProject();
				var filelist = pj.getSitemapFilelist();
				$('.cont_filelist_sitemap').html('').append( $('<ul data-inset="true">') );

				filelistLoop:for( var i in filelist ){
					switch( px.utils.getExtension(filelist[i]) ){
						case 'csv':
						case 'xlsx':
							break;
						default:
							continue filelistLoop;
					}

					$('.cont_filelist_sitemap ul').append( $('<li>')
						.append( $('<a>')
							.attr('href', 'javascript:;')
							.data('filename', filelist[i] )
							.data('num', i)
							.click( function(e){
								var path = pj.get('path')+'/'+pj.get('home_dir')+'/sitemaps/'+$(this).data('filename');

								window.px.utils.spawn('open',
									[path],
									{
										success: function(data){
										} ,
										error: function(data){
											alert('error!');
										} ,
										complete: function(code){
										}
									}
								);

							} )
							.text( filelist[i] )
						)
					);
				}
				$('.cont_filelist_sitemap ul').listview();
			});
		</script>
	</head>
	<body>
		<div class="container">
			<h1>Sitemap Filelist</h1>
		</div>
		<div class="contents">
			<div class="container">
				<div class="unit cont_filelist_sitemap"></div>
			</div>
		</div>
	</body>
</html>